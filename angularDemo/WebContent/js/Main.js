var app = angular.module('interfaceApp', [ 'ui.bootstrap', 'LoadingIndicator', 'ngCookies', 'datatablesDirectives', 'ngSanitize', 'interfaceApp.admin-directives', 'interfaceApp.trade-directives', 'misc-directives', 'input-directives', 'filter-directives' ]).config([ '$routeProvider', '$httpProvider', '$locationProvider', function($routeProvider, $httpProvider, $locationProvider) { var access = routingConfig.accessLevels; $routeProvider.when('/login', { templateUrl : 'views/login.html', controller : LoginCtrl, access : access.anon }).when('/resetPassword', { templateUrl : 'views/resetPassword.html', controller : ResetPasswordCtrl, access : access.anon }).when('/transactions', { templateUrl : 'views/transactions.html', controller : TradeTablesCtrl, access : access.user resolve:{ tablePrefs: } }).when('/admin', { redirectTo : '/admin/changeuser' }).when('/admin/:page', { templateUrl : './views/admin.html', controller : AdminCtrl, access : access.user }).otherwise({ redirectTo : 'transactions' }); // $locationProvider.html5Mode(true); var interceptor = [ '$location', '$q', function($location, $q) { function success(response) { return response; } function error(response) { if (response.status === 401) { $location.path('/login'); return $q.reject(response); } else { return $q.reject(response); } } return function(promise) { return promise.then(success, error); } } ];
